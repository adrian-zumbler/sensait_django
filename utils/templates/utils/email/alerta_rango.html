{% load arduino_tags %}

<style>
  html{
    font-family:Arial;
  }
  p{
    font-size:18px;
     line-height: 30px;
  }
</style>

{% if arduinoalert.sensors_in_alert.count == 1 %}
  <h1>
    ¡Alerta! Se encuentra <b>{{arduinoalert.sensors_in_alert.count}}</b> sensor con registros fuera de rango.
  </h1>
{% else %}
  <h1>
    ¡Alerta! Se encuentran <b>{{arduinoalert.sensors_in_alert.count}}</b> sensores con registros fuera de rango.
  </h1>
{% endif %}

<p>
Apreciable <b>{{ arduinoalert.sensor_data.last.arduino_sensor.arduino.project.nombre_encargado }}</b> el dispositivo <b>Sensait CORE {{ arduinoalert.sensor_data.last.arduino_sensor.arduino.name }}</b> ha registrado temperaturas fuera de rango de operación, por favor verifique que el equipo <b> {{ arduinoalert.sensor_data.last.arduino_sensor.equipment.equipment_name }} </b> esté funcionando o cerrado correctamente.
</p>

<ul>
  {% for sensor_alert in arduinoalert.sensor_alerts %}
    <li>
      <span>
        Sensor: <b>{{sensor_alert.description}}</b>
        Ultimo Valor Registrado: <b>{{ sensor_alert.data.last.data |floatformat:2}}{{ sensor_alert.sensor_type.subfix}}</b>
        Fecha de Envio: <b>{{sensor_alert.data.last.epoch | epoch2Date }}</b>
      </span>
    </li><br/>
  {% endfor %}
</ul>

<h2>Detalle de los Sensores en Alerta: </h2>

{% for sensor_alert in arduinoalert.sensor_alerts %}
  <p>
  Nombre de Sensor: <b>{{sensor_alert.description}}</b> <br/>
  Tipo de Sensor: <b>{{sensor_alert.sensor_type.name}}</b> <br/>
  Equipo: <b>{{sensor_alert.equipment.equipment_name}}</b> <br/>
  Ultimo Dato: <b>{{ sensor_alert.data.last.data |floatformat:2}}{{ sensor_alert.sensor_type.subfix}}</b> <br/>
  Valor Minimo: <b> {{  arduinoalert.sensor_data.last.arduino_sensor.min_value |floatformat:2}}{{ arduinoalert.sensor_data.last.arduino_sensor.sensor_type.subfix }} </b> <br/>
  Valor Minimo: <b> {{  arduinoalert.sensor_data.last.arduino_sensor.max_value |floatformat:2}}{{ arduinoalert.sensor_data.last.arduino_sensor.sensor_type.subfix }} </b> <br/>
  Fecha: <b>{{sensor_alert.data.last.epoch | epoch2Date }}</b> <br/>
  </p>
{% endfor %}

<br/>

<h2>Información de la Alerta: </h2>
<p>
  Fecha de Inicio de alerta: <b>{{ arduinoalert.created_at }}</b><br/>
  Ultima actualización de alerta: <b>{{ arduinoalert.updated_at }}</b><br/>
  Total de sensores en alerta: <b>{{arduinoalert.sensors_in_alert.count}}</b><br/>
  Valores recibidos fuera de Rango : <b>{{ arduinoalert.sensor_data.count }}</b><br/><br/>
  Instalación: <b> {{ arduinoalert.sensor_data.last.arduino_sensor.arduino.project.name }}</b><br/>
  Transmisor: <b> {{ arduinoalert.sensor_data.last.arduino_sensor.arduino.name }} </b><br/>
  Ubicación:<b>  {{ arduinoalert.sensor_data.last.arduino_sensor.arduino.location }} </b><br/>
  Equipo:<b> {{ arduinoalert.sensor_data.last.arduino_sensor.equipment.equipment_name }} </b>
  <br/>
  </b>
</p>

<br/>
<p>
Puede ver mas información de esta alerta dando click <a href="http://sensait.dyndns.org/dash/reports/{{ arduinoalert.sensor_data.last.arduino_sensor.arduino.id }}/" target="_blank">aqui</a>
<br/>
<br/>

Quedamos a sus órdenes para cualquier duda o comentario.
Sensait Soporte
</p>

<hr/>
<p>
  <b>Nota:</b> Para mayor detalle de la alerta y registros favor de entrar a la plataforma de adminsitración en <a href="sensait.dyndns.org" target="_blank">SENSAIT.COM</a>.
  <br/>
</p>
<!-- hola mundo {{ object.data }}
hola mundo {{ sensordata.data }}-->
